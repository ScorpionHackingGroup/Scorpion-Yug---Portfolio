<!DOCTYPE html>
<html>
<head>
  <title>SassyNotes</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <!-- ‚úÖ Stylesheet Link Tag (use your own CSS file later) -->
  <link rel="stylesheet" href="SassyNotes.css">

  <!-- ‚úÖ Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
</head>
<body>
  <h1>SassyNotes</h1>
  <div id="notes-list"></div>

  <footer>
    Developed by <a href="https://t.me/ScorpionYug/" target="_blank">Scorpion Yug</a> & Zara üáÆüá≥
  </footer>

  <script>
    // ‚úÖ Firebase Config (as provided)
    const firebaseConfig = {
      apiKey: "AIzaSyDuWizv5P52KY73NEE_sb1S4xhOp2swogI",
      authDomain: "sassynotes-8270b.firebaseapp.com",
      projectId: "sassynotes-8270b",
      storageBucket: "sassynotes-8270b.firebasestorage.app",
      messagingSenderId: "81404740812",
      appId: "1:81404740812:web:4da9550da492b0ff0c2e69",
      measurementId: "G-VKBLEDQZX6"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // üîÅ Fetch UPI ID
    let currentUPI = '';
    db.ref('settings/upi').on('value', (snap) => {
      if (snap.exists()) {
        currentUPI = snap.val();
        const upiEls = document.querySelectorAll('#current-upi');
        upiEls.forEach(el => el.textContent = currentUPI);
      }
    });

    // üîÅ Fetch Notes
    db.ref('notes').on('value', (snapshot) => {
      const data = snapshot.val();
      renderNotes(data);
    });

    // üß† Render Notes
    function renderNotes(notesObj) {
      const container = document.getElementById('notes-list');
      container.innerHTML = '';

      if (!notesObj) {
        container.innerHTML = '<p>No notes found.</p>';
        return;
      }

      Object.keys(notesObj).forEach(noteId => {
        const n = notesObj[noteId];
        const el = document.createElement('div');

        el.innerHTML = `
          ${n.image ? `<img src="${n.image}" alt="${n.title}" width="250" style="max-width:100%;"><br>` : ''}
          <h3>${n.title}</h3>
          <p>${n.description}</p>

          ${parseInt(n.price) === 0 ? `
            <button onclick="downloadNote('${noteId}')">Download Free</button>
          ` : `
            <p>Price: ‚Çπ${n.price}</p>
            <ol>
              <li>Pay via UPI: <strong id="current-upi">${currentUPI}</strong></li>
              <li>
                Send payment screenshot to 
                <a target="_blank" href="https://wa.me/${n.whatsapp}?text=Payment%20for%20note%20${encodeURIComponent(n.title)}">WhatsApp</a>
              </li>
            </ol>
            <strong>Note will be sent on WhatsApp after payment confirmation.</strong>
          `}
        `;
        container.appendChild(el);
      });
    }

    // üìÅ Placeholder for download
    function downloadNote(id) {
      alert("Download not implemented. Please connect Firebase Storage.");
    }
  </script>
</body>
</html>
